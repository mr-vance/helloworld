version: 2.1

orbs:
  codecov: codecov/codecov@3.2.4

jobs:
  say-hello:
    docker:
      - image: cimg/node:15.0.1

    steps:
      - checkout
      - restore_cache:
          keys:
            - node-v1-{{ checksum "package.json" }}
            - node-v1-
      - run:
          name: "Installl npm"
          command: npm install
      - run:
          name: "Install npm test"
          command: npm install test
      - run:
          name: "Install node"
          command: npm install node
      - run:
          name: "Run tests"
          command: npm test
      - codecov/upload:
          token: $CODECOV_TOKEN

workflows:
  say-hello-workflow:
    jobs:
      - say-hello
